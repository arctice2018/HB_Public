第 4 课
========================================================
```{r}
library(ggplot2)
df <- read.csv('pseudo_facebook.tsv',sep = '\t')
```

***

### 散点图和自我感知的关注量
注释：研究两个变量之间的关系，首先选择散点图。

***

### 散点图
注释：

```{r Scatterplots}
ggplot(aes(x = age,y = friend_count),data = df) +
  geom_point()
```

***

#### 你现在注意到什么？
回复：30岁以下的用户，他们的好友数最多，超过30岁的用户，好友数只有30岁以下用户的一半。另外，超过60岁的用户，其好友数存在异常，出现多个竖线，且好友数和30岁以下的用户的好友数相近。

可是使用函数read.delim()来读取tsv文件。
```{r}
df2 <- read.delim('pseudo_facebook.tsv')
```

***

### ggplot 语法
注释：

```{r ggplot Syntax}
ggplot(aes(x = age,y = friend_count),data = df) +
  geom_point() +
  xlim(13,90)
```

***

### 过度绘制
注释：alpha的参数值为1/20，表示每20个数据用1个图像中的墨点表示。

```{r Overplotting}
ggplot(aes(x = age,y = friend_count),data = df) +
  geom_point(alpha = 1/20) +
  xlim(13,90)
```
使用geom_jitter，而不是geom_point的原因是，age是连续数值，而geom_point展示出间隔,jitter实际上是为现有的数据增加噪声，注意，对于原点的数据，可能使数值变成负值。
```{r}
ggplot(aes(x = age,y = friend_count),data = df) +
  geom_jitter(alpha = 1/20) +
  xlim(13,90)
```

#### 你在这个绘图中注意到了什么？
回复：30岁以下的用户的好友大多数都小于1000人，而不是没有调整alpha之前的图像，那看起来好友数超过1000人的用户很多。

***

### Coord_trans()
注释：

#### 查阅 coord_trans() 的文档，在绘图中增加一层，使用平方根函数改变 friend_count。创建你的绘图！
这里不能使用geom_jitter(),因为位于纵坐标的好友数可能存在0，如果使用sqrt进行调整的化，噪声可能使数值出现负值，那么负值的平方不是实数。
```{r}
ggplot(aes(x = age,y = friend_count),data = df) +
  geom_point(alpha = 1/20) +
  xlim(13,90) +
  coord_trans(y = 'sqrt')
```

#### 你发现了什么？
年龄在25岁以下的用户，他们的好友数一般都低于1000人。
***

### Alpha 和抖动
注释：geom_jitter(),可以使用geom_point()函数，并传入position参数作为替换，也可以起到相同的作用。

```{r Alpha and Jitter}
ggplot(aes(x = age,y = friendships_initiated),data = df) +
  geom_point(position = "jitter",alpha = 1/20) +
  xlim(13,90)
```
如果要对y轴进行坐标平方根缩放的话，在使用jitter的情况下，可以这样设置geom_point的position参数。
```{r}
ggplot(aes(x = age,y = friendships_initiated),data = df) +
  geom_point(alpha= 1/10,position = position_jitter(height = 0)) +
  coord_trans(y='sqrt')
```

***

### 过度绘制和领域知识
注释：

***

### 条件平均数
注释：

```{r Conditional Means}

```

创建你的绘图！

```{r Conditional Means Plot}

```

***

### 将摘要与原始数据叠加
注释：

```{r Overlaying Summaries with Raw Data}

```

#### 你在这个绘图中发现了什么？
回复：

***

### Moira：直方图总结与散点图
查看这个视频中的 Instructor Notes，下载 Moira's 关于感知关注量的论文，观察最终绘图。

注释：

***

### 相关性
注释：

```{r Correlation}

```

查看函数 cor.test 的文档。

年龄和朋友数量的相关性是什么？四舍五入到小数点后三位。
回复：

***

### 数据集的相关性
注释：

```{r Correlation on Subsets}
with(                 , cor.test(age, friend_count))
```

***

### 相关性方法
注释：

***

## 创建散点图
注释：

```{r}

```

***

### 强相关
注释：

```{r Strong Correlations}

```

两个变量之间的相关性是什么？计算时包含变量的前 5% 数值，四舍五入到小数点后三位。

```{r Correlation Calcuation}

```

回复：

***

### Moira 的相关性
注释：

***

### 相关性的更多注意事项
注释：

```{r More Caution With Correlation}
install.packages('alr3')
library(alr3)
```

创建你的绘图！

```{r Temp vs Month}

```

***

### 噪音散点图
a. 猜猜散点图的相关系数。

b. 两个变量的实际相关性是什么？
(四舍五入到千分位)

```{r Noisy Scatterplots}

```

***

### 理解数据
注释：

```{r Making Sense of Data}

```

***

### 新视角

你发现了什么？
回复：

观看解答视频，核对 Instructor Notes！
注释：

***

### 理解噪音：年龄到含有月份的年龄
注释：

```{r Understanding Noise: Age to Age Months}

```

***

### 含有月份平均数的年龄

```{r Age with Months Means}

```

编程任务
```{r Programming Assignment}

```

***

### 条件平均数的噪音

```{r Noise in Conditional Means}

```

***

### 使条件平均数更加流畅
注释：

```{r Smoothing Conditional Means}

```

***

### 选择哪个绘图？
注释：

***

### 分析两个变量
思考：

***

点击 **KnitHTML** 查看你的成果和这节课的 html 页面、
答案和注释！
